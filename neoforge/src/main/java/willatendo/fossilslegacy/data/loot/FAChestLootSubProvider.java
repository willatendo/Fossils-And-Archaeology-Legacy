package willatendo.fossilslegacy.data.loot;

import net.minecraft.core.HolderLookup;
import net.minecraft.data.loot.LootTableSubProvider;
import net.minecraft.resources.ResourceKey;
import net.minecraft.world.item.Items;
import net.minecraft.world.item.alchemy.Potions;
import net.minecraft.world.level.storage.loot.LootPool;
import net.minecraft.world.level.storage.loot.LootTable;
import net.minecraft.world.level.storage.loot.LootTable.Builder;
import net.minecraft.world.level.storage.loot.entries.LootItem;
import net.minecraft.world.level.storage.loot.functions.SetItemCountFunction;
import net.minecraft.world.level.storage.loot.functions.SetPotionFunction;
import net.minecraft.world.level.storage.loot.providers.number.ConstantValue;
import net.minecraft.world.level.storage.loot.providers.number.UniformGenerator;
import willatendo.fossilslegacy.server.item.FAItems;
import willatendo.fossilslegacy.server.item.FALootTables;

import java.util.function.BiConsumer;

public class FAChestLootSubProvider implements LootTableSubProvider {
    public FAChestLootSubProvider(HolderLookup.Provider registries) {
    }

    @Override
    public void generate(BiConsumer<ResourceKey<LootTable>, Builder> chestLoot) {
        chestLoot.accept(FALootTables.ACADEMY_LOOT, LootTable.lootTable().withPool(LootPool.lootPool().setRolls(UniformGenerator.between(1.0F, 10.0F)).add(LootItem.lootTableItem(FAItems.SCARAB_GEM_JAVELIN.get()).setWeight(1)).add(LootItem.lootTableItem(FAItems.NETHERITE_JAVELIN.get()).setWeight(1)).add(LootItem.lootTableItem(FAItems.CENOZOIC_FOSSIL.get()).setWeight(20)).add(LootItem.lootTableItem(FAItems.MESOZOIC_FOSSIL.get()).setWeight(20)).add(LootItem.lootTableItem(FAItems.PALAEOZOIC_FOSSIL.get()).setWeight(20)).add(LootItem.lootTableItem(FAItems.PLANT_FOSSIL.get()).setWeight(20)).add(LootItem.lootTableItem(FAItems.RELIC_SCRAP.get()).setWeight(20))).withPool(LootPool.lootPool().setRolls(UniformGenerator.between(0.0F, 1.0F)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.WATER)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.AWKWARD)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.NIGHT_VISION)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.LONG_NIGHT_VISION)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.INVISIBILITY)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.LONG_INVISIBILITY)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.FIRE_RESISTANCE)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.LONG_FIRE_RESISTANCE)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.SWIFTNESS)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.LONG_SWIFTNESS)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.STRONG_SWIFTNESS)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.SLOWNESS)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.LONG_SLOWNESS)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.STRONG_SLOWNESS)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.HEALING)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.STRONG_HEALING)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.HARMING)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.STRONG_HARMING)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.POISON)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.LONG_POISON)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.STRONG_POISON)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.REGENERATION)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.LONG_REGENERATION)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.STRONG_REGENERATION)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.STRENGTH)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.LONG_STRENGTH)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.STRONG_STRENGTH)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.WEAKNESS)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.LONG_WEAKNESS)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.LEAPING)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.LONG_LEAPING)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.STRONG_LEAPING)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.TURTLE_MASTER)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.LONG_TURTLE_MASTER)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.STRONG_TURTLE_MASTER)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.WATER_BREATHING)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.LONG_WATER_BREATHING)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.SLOW_FALLING)).setWeight(1)).add(LootItem.lootTableItem(Items.POTION).apply(SetPotionFunction.setPotion(Potions.LONG_SLOW_FALLING)).setWeight(1))));
        chestLoot.accept(FALootTables.ACADEMY_DISC, LootTable.lootTable().withPool(LootPool.lootPool().setRolls(ConstantValue.exactly(1.0F)).add(LootItem.lootTableItem(Items.MUSIC_DISC_11)).add(LootItem.lootTableItem(Items.MUSIC_DISC_13)).add(LootItem.lootTableItem(Items.MUSIC_DISC_BLOCKS)).add(LootItem.lootTableItem(Items.MUSIC_DISC_CAT)).add(LootItem.lootTableItem(Items.MUSIC_DISC_CHIRP)).add(LootItem.lootTableItem(Items.MUSIC_DISC_FAR)).add(LootItem.lootTableItem(Items.MUSIC_DISC_MALL)).add(LootItem.lootTableItem(Items.MUSIC_DISC_MELLOHI)).add(LootItem.lootTableItem(Items.MUSIC_DISC_STAL)).add(LootItem.lootTableItem(Items.MUSIC_DISC_STRAD)).add(LootItem.lootTableItem(Items.MUSIC_DISC_WAIT)).add(LootItem.lootTableItem(Items.MUSIC_DISC_WARD))));
        chestLoot.accept(FALootTables.LAB_DNA_LOOT, LootTable.lootTable().withPool(LootPool.lootPool().setRolls(ConstantValue.exactly(1.0F)).add(LootItem.lootTableItem(FAItems.TRICERATOPS_DNA.get()).apply(SetItemCountFunction.setCount(UniformGenerator.between(1.0F, 4.0F)))).add(LootItem.lootTableItem(FAItems.VELOCIRAPTOR_DNA.get()).apply(SetItemCountFunction.setCount(UniformGenerator.between(1.0F, 3.0F)))).add(LootItem.lootTableItem(FAItems.TYRANNOSAURUS_DNA.get()))));
        chestLoot.accept(FALootTables.LAB_FOSSIL_LOOT, LootTable.lootTable().withPool(LootPool.lootPool().setRolls(ConstantValue.exactly(1.0F)).add(LootItem.lootTableItem(FAItems.RELIC_SCRAP.get()).apply(SetItemCountFunction.setCount(UniformGenerator.between(1.0F, 4.0F)))).add(LootItem.lootTableItem(FAItems.MESOZOIC_FOSSIL.get()).apply(SetItemCountFunction.setCount(UniformGenerator.between(1.0F, 4.0F)))).add(LootItem.lootTableItem(FAItems.FROZEN_MEAT.get()).apply(SetItemCountFunction.setCount(UniformGenerator.between(1.0F, 4.0F))))));
        chestLoot.accept(FALootTables.LAB_FAILED_EXPERIMENT_LOOT, LootTable.lootTable().withPool(LootPool.lootPool().setRolls(ConstantValue.exactly(1.0F)).add(LootItem.lootTableItem(Items.SLIME_BALL).apply(SetItemCountFunction.setCount(UniformGenerator.between(1.0F, 3.0F)))).add(LootItem.lootTableItem(Items.ROTTEN_FLESH).apply(SetItemCountFunction.setCount(UniformGenerator.between(1.0F, 2.0F)))).add(LootItem.lootTableItem(Items.BONE).apply(SetItemCountFunction.setCount(UniformGenerator.between(1.0F, 5.0F)))).add(LootItem.lootTableItem(Items.BUCKET))));
        chestLoot.accept(FALootTables.MAYAN_LOOT, LootTable.lootTable().withPool(LootPool.lootPool().setRolls(ConstantValue.exactly(1.0F)).add(LootItem.lootTableItem(FAItems.JADE.get()).setWeight(20)).add(LootItem.lootTableItem(FAItems.JADE_OCELOT.get()).setWeight(4)).add(LootItem.lootTableItem(FAItems.JADE_VILLAGER.get()).setWeight(4)).add(LootItem.lootTableItem(Items.ROTTEN_FLESH).setWeight(30)).add(LootItem.lootTableItem(Items.BONE).setWeight(30)).add(LootItem.lootTableItem(FAItems.SCARAB_GEM_JAVELIN.get()).setWeight(10))));
        chestLoot.accept(FALootTables.MAYAN_TREASURE, LootTable.lootTable().withPool(LootPool.lootPool().setRolls(ConstantValue.exactly(1.0F)).add(LootItem.lootTableItem(FAItems.JADE.get()).setWeight(20)).add(LootItem.lootTableItem(FAItems.JADE_OCELOT.get()).setWeight(4)).add(LootItem.lootTableItem(FAItems.JADE_VILLAGER.get()).setWeight(4)).add(LootItem.lootTableItem(FAItems.CODEX.get()).setWeight(6))));
        chestLoot.accept(FALootTables.WEAPON_SHOP_DECOY, LootTable.lootTable().withPool(LootPool.lootPool().setRolls(UniformGenerator.between(1.0F, 3.0F)).add(LootItem.lootTableItem(Items.WOODEN_AXE)).add(LootItem.lootTableItem(Items.WOODEN_HOE)).add(LootItem.lootTableItem(Items.WOODEN_PICKAXE)).add(LootItem.lootTableItem(Items.WOODEN_SHOVEL)).add(LootItem.lootTableItem(Items.WOODEN_SWORD)).add(LootItem.lootTableItem(FAItems.WOODEN_JAVELIN.get())).add(LootItem.lootTableItem(Items.STONE_AXE)).add(LootItem.lootTableItem(Items.STONE_HOE)).add(LootItem.lootTableItem(Items.STONE_PICKAXE)).add(LootItem.lootTableItem(Items.STONE_SHOVEL)).add(LootItem.lootTableItem(Items.STONE_SWORD)).add(LootItem.lootTableItem(FAItems.STONE_JAVELIN.get()))));
        chestLoot.accept(FALootTables.WEAPON_SHOP_LOOT, LootTable.lootTable().withPool(LootPool.lootPool().setRolls(UniformGenerator.between(0.0F, 1.0F)).add(LootItem.lootTableItem(FAItems.SCARAB_GEM_UPGRADE_SMITHING_TEMPLATE.get()))).withPool(LootPool.lootPool().setRolls(UniformGenerator.between(3.0F, 10.0F)).add(LootItem.lootTableItem(Items.GOLDEN_AXE)).add(LootItem.lootTableItem(Items.GOLDEN_HOE)).add(LootItem.lootTableItem(Items.GOLDEN_PICKAXE)).add(LootItem.lootTableItem(Items.GOLDEN_SHOVEL)).add(LootItem.lootTableItem(Items.GOLDEN_SWORD)).add(LootItem.lootTableItem(FAItems.GOLDEN_JAVELIN.get())).add(LootItem.lootTableItem(Items.DIAMOND_AXE)).add(LootItem.lootTableItem(Items.DIAMOND_HOE)).add(LootItem.lootTableItem(Items.DIAMOND_PICKAXE)).add(LootItem.lootTableItem(Items.DIAMOND_SHOVEL)).add(LootItem.lootTableItem(Items.DIAMOND_SWORD)).add(LootItem.lootTableItem(FAItems.DIAMOND_JAVELIN.get())).add(LootItem.lootTableItem(Items.IRON_AXE)).add(LootItem.lootTableItem(Items.IRON_HOE)).add(LootItem.lootTableItem(Items.IRON_PICKAXE)).add(LootItem.lootTableItem(Items.IRON_SHOVEL)).add(LootItem.lootTableItem(Items.IRON_SWORD)).add(LootItem.lootTableItem(FAItems.IRON_JAVELIN.get())).add(LootItem.lootTableItem(Items.BOW)).add(LootItem.lootTableItem(Items.ARROW)).add(LootItem.lootTableItem(Items.TIPPED_ARROW)).apply(SetPotionFunction.setPotion(Potions.HARMING)).add(LootItem.lootTableItem(Items.SPECTRAL_ARROW))));
        chestLoot.accept(FALootTables.VILLAGE_ARCHAEOLOGIST_HUT, LootTable.lootTable().withPool(LootPool.lootPool().setRolls(ConstantValue.exactly(1.0F)).add(LootItem.lootTableItem(FAItems.JADE.get()).setWeight(20)).add(LootItem.lootTableItem(FAItems.JADE_OCELOT.get()).setWeight(4)).add(LootItem.lootTableItem(FAItems.JADE_VILLAGER.get()).setWeight(4)).add(LootItem.lootTableItem(Items.ROTTEN_FLESH).setWeight(30)).add(LootItem.lootTableItem(Items.BONE).setWeight(30)).add(LootItem.lootTableItem(FAItems.SCARAB_GEM_JAVELIN.get()).setWeight(10))));
    }
}
