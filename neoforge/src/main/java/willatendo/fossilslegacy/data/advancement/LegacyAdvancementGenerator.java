package willatendo.fossilslegacy.data.advancement;

import net.minecraft.advancements.Advancement;
import net.minecraft.advancements.AdvancementHolder;
import net.minecraft.advancements.AdvancementRequirements;
import net.minecraft.advancements.AdvancementType;
import net.minecraft.advancements.critereon.*;
import net.minecraft.core.HolderLookup;
import net.minecraft.core.registries.Registries;
import net.minecraft.data.advancements.AdvancementSubProvider;
import willatendo.fossilslegacy.server.block.FABlocks;
import willatendo.fossilslegacy.server.criteria.criterias.CreateZombifiedPigmanTrigger;
import willatendo.fossilslegacy.server.criteria.criterias.SummonAnuTrigger;
import willatendo.fossilslegacy.server.criteria.criterias.TameZombifiedPigmanTrigger;
import willatendo.fossilslegacy.server.item.FAItems;
import willatendo.fossilslegacy.server.level.FALevels;
import willatendo.fossilslegacy.server.tags.FAItemTags;
import willatendo.fossilslegacy.server.utils.FAUtils;

import java.util.function.Consumer;

public class LegacyAdvancementGenerator implements AdvancementSubProvider {
    @Override
    public void generate(HolderLookup.Provider provider, Consumer<AdvancementHolder> advancementHolderConsumer) {
        AdvancementHolder legacyRoot = Advancement.Builder.advancement().display(FABlocks.FOSSIL_ORE.get(), FAUtils.translation("advancements", "legacy.root.title"), FAUtils.translation("advancements", "legacy.root.desc"), FAUtils.mc("textures/gui/advancements/backgrounds/stone.png"), AdvancementType.TASK, false, false, false).addCriterion("ticks", PlayerTrigger.TriggerInstance.tick()).save(advancementHolderConsumer, FAUtils.resource("legacy/root").toString());
        AdvancementHolder fossils = Advancement.Builder.advancement().parent(legacyRoot).display(FAItems.FOSSIL.get(), FAUtils.translation("advancements", "legacy.fossil.title"), FAUtils.translation("advancements", "legacy.fossil.desc"), null, AdvancementType.TASK, true, true, true).addCriterion("has_fossil", InventoryChangeTrigger.TriggerInstance.hasItems(FAItems.FOSSIL.get())).save(advancementHolderConsumer, FAUtils.resource("legacy/fossil").toString());
        AdvancementHolder analyzer = Advancement.Builder.advancement().parent(fossils).display(FABlocks.ANALYZER.get(), FAUtils.translation("advancements", "legacy.analyzer.title"), FAUtils.translation("advancements", "legacy.analyzer.desc"), null, AdvancementType.TASK, true, true, true).addCriterion("has_analyzer", InventoryChangeTrigger.TriggerInstance.hasItems(FABlocks.ANALYZER.get())).save(advancementHolderConsumer, FAUtils.resource("legacy/analyzer").toString());
        AdvancementHolder bingoDinoDNA = Advancement.Builder.advancement().parent(analyzer).display(FAItems.TYRANNOSAURUS_DNA.get(), FAUtils.translation("advancements", "legacy.bingo_dino_dna.title"), FAUtils.translation("advancements", "legacy.bingo_dino_dna.desc"), null, AdvancementType.TASK, true, true, true).addCriterion("has_dna", InventoryChangeTrigger.TriggerInstance.hasItems(ItemPredicate.Builder.item().of(provider.lookupOrThrow(Registries.ITEM), FAItemTags.DNA))).save(advancementHolderConsumer, FAUtils.resource("legacy/bingo_dino_dna").toString());
        AdvancementHolder sixtySix = Advancement.Builder.advancement().parent(bingoDinoDNA).display(FAItems.TRICERATOPS_EGG.get(), FAUtils.translation("advancements", "legacy.sixty_six.title"), FAUtils.translation("advancements", "legacy.sixty_six.desc"), null, AdvancementType.TASK, true, true, true).addCriterion("has_egg", InventoryChangeTrigger.TriggerInstance.hasItems(ItemPredicate.Builder.item().of(provider.lookupOrThrow(Registries.ITEM), FAItemTags.DINO_EGGS))).save(advancementHolderConsumer, FAUtils.resource("legacy/sixty_six").toString());
        Advancement.Builder.advancement().parent(sixtySix).display(FAItems.VELOCIRAPTOR_EGG.get(), FAUtils.translation("advancements", "legacy.bred_raptors.title"), FAUtils.translation("advancements", "legacy.bred_raptors.desc"), null, AdvancementType.GOAL, true, true, true).addCriterion("has_egg", InventoryChangeTrigger.TriggerInstance.hasItems(FAItems.VELOCIRAPTOR_EGG.get())).save(advancementHolderConsumer, FAUtils.resource("legacy/bred_raptors").toString());
        Advancement.Builder.advancement().parent(sixtySix).display(FAItems.TYRANNOSAURUS_EGG.get(), FAUtils.translation("advancements", "legacy.have_tyrannosaurus.title"), FAUtils.translation("advancements", "legacy.have_tyrannosaurus.desc"), null, AdvancementType.GOAL, true, true, true).addCriterion("has_egg", InventoryChangeTrigger.TriggerInstance.hasItems(FAItems.TYRANNOSAURUS_EGG.get())).save(advancementHolderConsumer, FAUtils.resource("legacy/have_tyrannosaurus").toString());
        AdvancementHolder undoingMistakes = Advancement.Builder.advancement().parent(bingoDinoDNA).display(FAItems.MAMMOTH_EMBRYO_SYRINGE.get(), FAUtils.translation("advancements", "legacy.undoing_mistakes.title"), FAUtils.translation("advancements", "legacy.undoing_mistakes.desc"), null, AdvancementType.TASK, true, true, true).addCriterion("has_embryo_syringe", InventoryChangeTrigger.TriggerInstance.hasItems(ItemPredicate.Builder.item().of(provider.lookupOrThrow(Registries.ITEM), FAItemTags.EMBRYO_SYRINGES))).save(advancementHolderConsumer, FAUtils.resource("legacy/undoing_mistakes").toString());
        Advancement.Builder.advancement().parent(fossils).display(FABlocks.PALAEONTOLOGY_TABLE.get(), FAUtils.translation("advancements", "legacy.palaeontology_table.title"), FAUtils.translation("advancements", "legacy.palaeontology_table.desc"), null, AdvancementType.TASK, true, true, true).addCriterion("has_palaeontology_table", InventoryChangeTrigger.TriggerInstance.hasItems(FABlocks.PALAEONTOLOGY_TABLE.get())).save(advancementHolderConsumer, FAUtils.resource("legacy/palaeontology_table").toString());
        AdvancementHolder relicScraps = Advancement.Builder.advancement().parent(legacyRoot).display(FAItems.RELIC_SCRAP.get(), FAUtils.translation("advancements", "legacy.relic_scrap.title"), FAUtils.translation("advancements", "legacy.relic_scrap.desc"), null, AdvancementType.TASK, true, true, true).addCriterion("has_relic_scrap", InventoryChangeTrigger.TriggerInstance.hasItems(FAItems.RELIC_SCRAP.get())).save(advancementHolderConsumer, FAUtils.resource("legacy/relic_scrap").toString());
        AdvancementHolder ancientSwordArtifact = Advancement.Builder.advancement().parent(relicScraps).display(FAItems.ANCIENT_SWORD_ARTIFACT.get(), FAUtils.translation("advancements", "legacy.ancient_sword_artifact.title"), FAUtils.translation("advancements", "legacy.ancient_sword_artifact.desc"), null, AdvancementType.TASK, true, true, true).addCriterion("has_sword_artifact", InventoryChangeTrigger.TriggerInstance.hasItems(FAItems.ANCIENT_SWORD_ARTIFACT.get())).save(advancementHolderConsumer, FAUtils.resource("legacy/sword_artifact").toString());
        AdvancementHolder ancientSword = Advancement.Builder.advancement().parent(ancientSwordArtifact).display(FAItems.ANCIENT_SWORD.get(), FAUtils.translation("advancements", "legacy.ancient_sword.title"), FAUtils.translation("advancements", "legacy.ancient_sword.desc"), null, AdvancementType.TASK, true, true, true).addCriterion("has_ancient_sword", InventoryChangeTrigger.TriggerInstance.hasItems(FAItems.ANCIENT_SWORD.get())).save(advancementHolderConsumer, FAUtils.resource("legacy/ancient_sword").toString());
        Advancement.Builder.advancement().parent(ancientSword).display(FAItems.ANCIENT_SWORD.get(), FAUtils.translation("advancements", "legacy.pigman.title"), FAUtils.translation("advancements", "legacy.pigman.desc"), null, AdvancementType.TASK, true, true, true).addCriterion("created_pigman", CreateZombifiedPigmanTrigger.TriggerInstance.zombifiedPiglin()).save(advancementHolderConsumer, FAUtils.resource("legacy/pigman").toString());
        AdvancementHolder ancientHelmetArtifact = Advancement.Builder.advancement().parent(relicScraps).display(FAItems.ANCIENT_HELMET_ARTIFACT.get(), FAUtils.translation("advancements", "legacy.ancient_helmet_artifact.title"), FAUtils.translation("advancements", "legacy.ancient_helmet_artifact.desc"), null, AdvancementType.TASK, true, true, true).addCriterion("has_helmet_artifact", InventoryChangeTrigger.TriggerInstance.hasItems(FAItems.ANCIENT_HELMET_ARTIFACT.get())).save(advancementHolderConsumer, FAUtils.resource("legacy/helmet_artifact").toString());
        AdvancementHolder fixedAncientArmor = Advancement.Builder.advancement().parent(ancientHelmetArtifact).display(FAItems.ANCIENT_HELMET.get(), FAUtils.translation("advancements", "legacy.fixed_ancient_armor.title"), FAUtils.translation("advancements", "legacy.fixed_ancient_armor.desc"), null, AdvancementType.TASK, true, true, true).requirements(AdvancementRequirements.Strategy.OR).addCriterion("has_helmet", InventoryChangeTrigger.TriggerInstance.hasItems(FAItems.ANCIENT_HELMET.get())).addCriterion("has_chestplate", InventoryChangeTrigger.TriggerInstance.hasItems(FAItems.ANCIENT_CHESTPLATE.get())).addCriterion("has_leggings", InventoryChangeTrigger.TriggerInstance.hasItems(FAItems.ANCIENT_LEGGINGS.get())).addCriterion("has_boots", InventoryChangeTrigger.TriggerInstance.hasItems(FAItems.ANCIENT_BOOTS.get())).save(advancementHolderConsumer, FAUtils.resource("legacy/fixed_ancient_armor").toString());
        AdvancementHolder deckedOut = Advancement.Builder.advancement().parent(fixedAncientArmor).display(FAItems.ANCIENT_CHESTPLATE.get(), FAUtils.translation("advancements", "legacy.decked_out.title"), FAUtils.translation("advancements", "legacy.decked_out.desc"), null, AdvancementType.GOAL, true, true, true).requirements(AdvancementRequirements.Strategy.AND).addCriterion("has_helmet", InventoryChangeTrigger.TriggerInstance.hasItems(FAItems.ANCIENT_HELMET.get())).addCriterion("has_chestplate", InventoryChangeTrigger.TriggerInstance.hasItems(FAItems.ANCIENT_CHESTPLATE.get())).addCriterion("has_leggings", InventoryChangeTrigger.TriggerInstance.hasItems(FAItems.ANCIENT_LEGGINGS.get())).addCriterion("has_boots", InventoryChangeTrigger.TriggerInstance.hasItems(FAItems.ANCIENT_BOOTS.get())).save(advancementHolderConsumer, FAUtils.resource("legacy/decked_out").toString());
        Advancement.Builder.advancement().parent(deckedOut).display(FAItems.ANCIENT_HELMET.get(), FAUtils.translation("advancements", "legacy.tamed_pigman.title"), FAUtils.translation("advancements", "legacy.tamed_pigman.desc"), null, AdvancementType.GOAL, true, true, true).addCriterion("tamed_pigman", TameZombifiedPigmanTrigger.TriggerInstance.tamedZombifiedPiglin()).save(advancementHolderConsumer, FAUtils.resource("legacy/tamed_pigman").toString());
        AdvancementHolder archaeologyWorkbench = Advancement.Builder.advancement().parent(relicScraps).display(FABlocks.ARCHAEOLOGY_WORKBENCH.get(), FAUtils.translation("advancements", "legacy.archaeology_workbench.title"), FAUtils.translation("advancements", "legacy.archaeology_workbench.desc"), null, AdvancementType.TASK, true, true, true).addCriterion("has_archaeology_workbench", InventoryChangeTrigger.TriggerInstance.hasItems(FABlocks.ARCHAEOLOGY_WORKBENCH.get())).save(advancementHolderConsumer, FAUtils.resource("legacy/archaeology_workbench").toString());
        Advancement.Builder.advancement().parent(archaeologyWorkbench).display(FAItems.STONE_TABLET.get(), FAUtils.translation("advancements", "legacy.stone_tablet.title"), FAUtils.translation("advancements", "legacy.stone_tablet.desc"), null, AdvancementType.TASK, true, true, true).addCriterion("used_stone_tablet", ItemUsedOnLocationTrigger.TriggerInstance.itemUsedOnBlock(LocationPredicate.Builder.location(), ItemPredicate.Builder.item().of(provider.lookupOrThrow(Registries.ITEM), FAItems.STONE_TABLET.get()))).save(advancementHolderConsumer, FAUtils.resource("legacy/stone_tablet").toString());
        AdvancementHolder skullBlock = Advancement.Builder.advancement().parent(legacyRoot).display(FABlocks.SKULL_BLOCK.get(), FAUtils.translation("advancements", "legacy.skull_block.title"), FAUtils.translation("advancements", "legacy.skull_block.desc"), null, AdvancementType.TASK, true, true, true).addCriterion("has_skull_block", InventoryChangeTrigger.TriggerInstance.hasItems(FABlocks.SKULL_BLOCK.get())).save(advancementHolderConsumer, FAUtils.resource("legacy/skull_block").toString());
        Advancement.Builder.advancement().parent(skullBlock).display(FABlocks.TIME_MACHINE.get(), FAUtils.translation("advancements", "legacy.anu.title"), FAUtils.translation("advancements", "legacy.anu.desc"), null, AdvancementType.GOAL, true, true, true).addCriterion("summoned_anu", SummonAnuTrigger.TriggerInstance.summonAnu()).save(advancementHolderConsumer, FAUtils.resource("legacy/anu").toString());
        AdvancementHolder prehistoricCoin = Advancement.Builder.advancement().parent(legacyRoot).display(FAItems.PREHISTORIC_COIN.get(), FAUtils.translation("advancements", "legacy.prehistoric_coin.title"), FAUtils.translation("advancements", "legacy.prehistoric_coin.desc"), null, AdvancementType.TASK, true, true, true).addCriterion("has_prehistoric_coin", InventoryChangeTrigger.TriggerInstance.hasItems(FAItems.PREHISTORIC_COIN.get())).save(advancementHolderConsumer, FAUtils.resource("legacy/prehistoric_coin").toString());
        Advancement.Builder.advancement().parent(prehistoricCoin).display(FAItems.OVERWORLD_COIN.get(), FAUtils.translation("advancements", "legacy.overworld_coin.title"), FAUtils.translation("advancements", "legacy.overworld_coin.desc"), null, AdvancementType.TASK, true, true, true).addCriterion("has_overworld_coin", InventoryChangeTrigger.TriggerInstance.hasItems(FAItems.OVERWORLD_COIN.get())).save(advancementHolderConsumer, FAUtils.resource("legacy/overworld_coin").toString());
        Advancement.Builder.advancement().parent(prehistoricCoin).display(FABlocks.TIME_MACHINE.get(), FAUtils.translation("advancements", "legacy.time_machine.title"), FAUtils.translation("advancements", "legacy.time_machine.desc"), null, AdvancementType.GOAL, true, true, true).addCriterion("time_travelled", ChangeDimensionTrigger.TriggerInstance.changedDimensionTo(FALevels.PREHISTORY)).save(advancementHolderConsumer, FAUtils.resource("legacy/time_machine").toString());
    }
}
